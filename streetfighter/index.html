<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Challenger スケジュール</title>
<style>
  body { font-family: sans-serif; padding: 10px; background: #f0f0f0; }
  h2 { text-align: center; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 18px; }
  th, td { border: 1px solid #ccc; padding: 12px; text-align: center; }
  th { background: #ddd; }
  tr.current { background: #fffae6; font-weight: bold; }
  input[type="checkbox"] { transform: scale(1.3); }
  @media(max-width:600px){
    table { font-size: 16px; }
    th, td { padding: 10px; }
  }
</style>
</head>
<body>

<h2>New Challenger スケジュール</h2>
<table id="schedule">
  <thead>
    <tr>
      <th>日付</th>
      <th>時間</th>
      <th>ステージ</th>
      <th>クリア</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
// --- 全てのステージデータをまとめる（例：一部抜粋、全部入れてもOK） ---
const events = [
  {stage:"VSリュウ 初級", times:["10/5 12:00-14:00","10/6 03:00-05:00","10/11 18:00-20:00","10/13 12:00-14:00","10/17 00:00-02:00","10/19 12:00-14:00","10/20 03:00-05:00"]},
  {stage:"VSリュウ 激ムズ", times:["10/4 18:00-20:00","10/6 12:00-14:00","10/10 12:00-14:00","10/12 00:00-02:00","10/13 21:00-23:00","10/18 18:00-20:00"]},
  {stage:"VS春麗 初級", times:["10/5 12:00-14:00","10/7 12:00-14:00","10/11 18:00-20:00","10/14 21:00-23:00","10/17 00:00-02:00","10/19 12:00-14:00"]},
  {stage:"VS春麗 激ムズ", times:["10/4 18:00-20:00","10/7 03:00-05:00","10/10 12:00-14:00","10/12 00:00-02:00","10/14 06:00-08:00","10/18 18:00-20:00"]},
  // ...ここに全ステージ追加 ...
];

// --- tbodyに反映 ---
const tbody = document.querySelector("#schedule tbody");

// 時刻順にフラットにする
let flatEvents = [];
events.forEach(e=>{
  e.times.forEach(t=>{
    flatEvents.push({stage:e.stage, time:t});
  });
});

// 時刻順にソート
flatEvents.sort((a,b)=>{
  const parseTime = s => {
    const [monthDay,hms] = s.split(" ");
    const [month, day] = [10, parseInt(monthDay.split("/")[1])]; // 10月固定
    const [h,m] = hms.split("-")[0].split(":");
    return new Date(2025, month-1, day, parseInt(h), parseInt(m));
  };
  return parseTime(a.time) - parseTime(b.time);
});

// 現在に最も近いイベントを取得
const now = new Date();
let closestTime = Infinity, closestIndex = -1;
flatEvents.forEach((e,i)=>{
  const [monthDay,hms] = e.time.split(" ");
  const [month, day] = [10, parseInt(monthDay.split("/")[1])];
  const [h,m] = hms.split("-")[0].split(":");
  const d = new Date(2025, month-1, day, parseInt(h), parseInt(m));
  const diff = Math.abs(d - now);
  if(diff < closestTime){
    closestTime = diff;
    closestIndex = i;
  }
});

// --- 表に描画 ---
flatEvents.forEach((e,i)=>{
  const tr = document.createElement("tr");
  if(i===closestIndex) tr.classList.add("current");
  tr.innerHTML = `
    <td>${e.time.split(" ")[0]}</td>
    <td>${e.time.split(" ")[1]}</td>
    <td>${e.stage}</td>
    <td><input type="checkbox" data-stage="${e.stage}"></td>
  `;
  tbody.appendChild(tr);
});

// --- クリアチェックで全同名削除 ---
tbody.addEventListener("change", e=>{
  if(e.target.type==="checkbox"){
    const stageName = e.target.dataset.stage;
    document.querySelectorAll(`input[data-stage="${stageName}"]`).forEach(chk=>{
      chk.closest("tr").remove();
    });
  }
});
</script>

</body>
</html>


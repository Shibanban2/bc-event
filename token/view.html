<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>にゃんこデータ表示</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f0f0f0;
    }
    h1 {
      text-align: center;
    }
    select {
      display: block;
      margin: 1rem auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      background: white;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 0.5rem;
      font-size: 0.9rem;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <h1>にゃんこイベントデータ 表示</h1>
  <select id="fileSelect">
    <option value="gatya_latest.tsv">gatya.tsv</option>
    <option value="sale_latest.tsv">sale.tsv</option>
    <option value="item_latest.tsv">item.tsv</option>
  </select>
  <div id="tableContainer">読み込み中...</div>

  <script>
    async function loadTSV(file) {
      const res = await fetch(file);
      const text = await res.text();
      const lines = text.trim().split('\n');
      const table = document.createElement('table');

      lines.forEach((line, i) => {
        const row = document.createElement('tr');
        line.split('\t').forEach(cell => {
          const cellElem = document.createElement(i === 0 ? 'th' : 'td');
          cellElem.textContent = cell;
          row.appendChild(cellElem);
        });
        table.appendChild(row);
      });

      const container = document.getElementById('tableContainer');
      container.innerHTML = '';
      container.appendChild(table);
    }

    document.getElementById('fileSelect').addEventListener('change', e => {
      loadTSV(e.target.value);
    });

    loadTSV('gatya_latest.tsv');
  </script>
</body>
</html>

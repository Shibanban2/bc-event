
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>?????????????</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #ffffff; }
    header { background-color: #222; color: white; padding: 1rem; text-align: center; font-size: 1.8rem; font-weight: bold; }
    .tabs { display: flex; background: #ddd; flex-wrap: wrap; }
    .tab { flex: 1 1 auto; text-align: center; padding: 1rem; cursor: pointer; font-size: 1.1rem; border-bottom: 3px solid transparent; }
    .tab.active { background: white; border-bottom: 3px solid #000; font-weight: bold; }
    .checkbox-container { display: flex; align-items: center; justify-content: center; padding: 10px; background: #f0f0f0; }
    .checkbox-container input { transform: scale(1.5); margin-right: 10px; }
    .content { padding: 1rem; }
    .section-title { font-size: 1.2rem; font-weight: bold; margin: 1.5rem 0 0.5rem; border-bottom: 2px solid #aaa; }
    .event-card { background: white; border-radius: 8px; padding: 0.8rem; margin: 0.5rem 0; font-size: 1rem; box-shadow: 0 0 5px rgba(0,0,0,0.1); cursor: pointer; white-space: pre-wrap; }
    .hidden { display: none; }
    .red { color: red; font-weight: bold; }
    .blue { color: blue; font-weight: bold; }
    .modal-backdrop { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000; }
    .modal-backdrop.show { display: flex; }
    .modal-content { background: white; padding: 20px; border-radius: 10px; max-width: 90%; max-height: 80%; overflow-y: auto; position: relative; }
    .modal-content #modal-close { position: absolute; top: 10px; right: 15px; font-size: 3rem; cursor: pointer; }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <header>
    ?????????????
    <button id="save-btn">???????</button>
  </header>

  <div class="tabs">
    <div class="tab active" onclick="showTab('gatya4')">gatya</div>
    <div class="tab" onclick="showTab('sale4')">sale</div>
    <div class="tab" onclick="showTab('item3')">item</div>
    <div class="tab" onclick="showTab('mission')">mission</div>
    <div class="tab" onclick="showTab('all')">??????</div>
  </div>

  <div class="checkbox-container">
    <input type="checkbox" id="showAll" />
    <label for="showAll">???????????</label>
  </div>

  <main id="main-container">
    <div id="gatya4" class="content"></div>
    <div id="sale4" class="content hidden"></div>
    <div id="item3" class="content hidden"></div>
    <div id="mission" class="content hidden"></div>
    <div id="all" class="content hidden"></div>
  </main>

  <!-- ???? -->
  <div id="detail-modal" class="modal-backdrop">
    <div class="modal-content">
      <span id="modal-close">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    const data = {"gatya4":["04/28?#?? ????????","04/28?#?? ???????","06/13?#?? ????????","06/13?#?? ???????","07/11?07/28 ????????   ????","07/11?07/28 ????????2nd   ????","07/18?07/28 ????????   ????","07/18?07/28 ????????2nd   ????","07/21?07/28 ????????   ????","07/21?07/28 ????????2nd   ????","07/23?07/28 ????????????","07/23?07/28 ????????2nd????","07/23?07/25 ????????????","07/25?07/28 ?????????","07/28?08/19 ?????????????????","07/28?08/01 ???????????","07/28?#?? ????????","07/28?#?? ???????","07/28?08/18 ?????????   ????","07/30?08/01 ??????????   ????","08/01?08/04 ????"],"gatya5":["04/28?#?? ????????<br>??????????<br>???5??<br>ID?971<br>?????9500<br>?????500<br>?????????????????????????????????","04/28?#?? ???????<br>??????????<br>???6??<br>ID?970<br>?????10000<br>??????????????????????????????","06/13?#?? ????????<br>??????????<br>???5??<br>ID?984<br>?????9500<br>?????500<br>?????????????????????????????????","06/13?#?? ???????<br>??????????<br>???6??<br>ID?983<br>?????10000<br>??????????????????????????????","07/11?07/28 ????????   ????<br>??????????<br>???1??<br>ID?998<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????????????","07/11?07/28 ????????2nd   ????<br>??????????<br>???2??<br>ID?999<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????2nd???","07/18?07/28 ????????   ????<br>??????????<br>???2??<br>ID?998<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????????????","07/18?07/28 ????????2nd   ????<br>??????????<br>???3??<br>ID?999<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????2nd???","07/21?07/28 ????????   ????<br>??????????<br>???1??<br>ID?998<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????????????","07/21?07/28 ????????2nd   ????<br>??????????<br>???2??<br>ID?999<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????2nd???","07/23?07/28 ????????????<br>??????????<br>???1??<br>ID?998<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????????????","07/23?07/28 ????????2nd????<br>??????????<br>???2??<br>ID?999<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????2nd???","07/23?07/25 ????????????<br>??????????<br>???3??<br>ID?946<br>???6970<br>????2500<br>?????500<br>?????30<br>????????????????????????????????????????!!","07/25?07/28 ?????????<br>??????????<br>???3??<br>ID?986<br>???6970<br>????2500<br>?????500<br>?????30<br>?????????????????????????????????????!!","07/28?08/19 ?????????????????<br>??????????<br>???2??<br>ID?40<br>?????1000<br>???5000<br>????3000<br>?????1000<br>???????????????????????????8?18???????????","07/28?08/01 ???????????<br>??????????<br>???1??<br>ID?992<br>???6970<br>????2500<br>?????500<br>?????30<br>???????????????????????????????????!!","07/28?#?? ????????<br>??????????<br>???5??<br>ID?996<br>?????9500<br>?????500<br>?????????????????????????????????","07/28?#?? ???????<br>??????????<br>???6??<br>ID?995<br>?????10000<br>??????????????????????????????","07/28?08/18 ?????????   ????<br>??????????<br>???2??<br>ID?1000<br>???7000<br>????2500<br>?????500<br>????!????!?????????????????????!!","07/30?08/01 ??????????   ????<br>??????????<br>???3??<br>ID?944<br>???6970<br>????2500<br>?????500<br>?????30<br>???????????????????????????????????!!","08/01?08/04 ????<br>??????????<br>???1??<br>ID?993<br>???6470<br>????2600<br>?????900<br>?????30<br>?????????????????????????????????????!!","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?","???<br>?????<br>ID?"],"sale4":["04/26(00:00)?09/28(00:00) ????????","04/26(00:00)?09/28(00:00) ????????","04/26(00:00)?09/28(00:00) ????????","04/27(00:00)?09/29(00:00) ????????","04/27(00:00)?09/29(00:00) ????????","05/15(00:00)?01/01(00:00) ???????????","07/04?07/28 ???????","07/04?07/28 ???1?","07/04?07/28 ???2?","07/04?07/28 ???3?","07/04?07/28 ???1?","07/04?07/28 ???2?","07/04?07/28 ???3?","07/04?07/28 ???1?","07/04?07/28 ???2?","07/04?07/28 ???3?","07/04?07/29(00:00) ?????????????????","07/04?07/29(00:00) ?????????????????","07/04?07/29(00:00) ?????????????????","07/03(00:00)?01/01(00:00) ??????16","07/03(00:00)?01/01(00:00) ??????17","07/03(00:00)?01/01(00:00) ??????18","07/11?07/28 ????????","07/11?07/28 ???????????","07/11?07/28 ????????","07/11?07/28 ????????","07/16(12:00)?07/28 ?????????","07/16?07/28 ????","07/20(12:00)?07/28 ???????????","07/21?07/28 ???? ????????","07/20?07/28 ????????????","07/21?07/28 ?????","07/16?08/01 ???????????????[?????]?","07/18?07/25 ??????????","07/23?07/28 ????????????","07/28?08/18 ???????? ?????","07/28?08/18 ?????","07/28?08/04(00:00) ?????????","07/28?08/18 ?????????","07/28?08/18 ????????????","07/28?08/18 ???????? ???","07/28?08/18(10:59) ???????????????","07/28?09/01(22:00) ?????????????????","07/28?09/01(22:00) ?????????????????","07/28?09/01(22:00) ?????????????????","08/01?08/16 ?????????????? ?????","08/01?08/08 ???????"],"item3":["03/22?01/01 ???????????123?","04/17?10/15 ???:981<br>1?????????? ? 5<br>2??????? ? 4<br>3????????? ? 1<br>4?????????? ? 3<br>5??????????? ? 2<br>6????????? ? 1<br>7???????????? ? 1<br>8????????? ? 4<br>9????????? ? 1<br>10??????????? ? 3<br>11?????????? ? 3<br>12????????? ? 1<br>13??????? ? 3<br>14?????????? ? 4<br>15????????? ? 1<br>16???????????? ? 1<br>17?????????? ? 3<br>18????????? ? 1<br>19?????????? ? 5<br>20??????????? ? 2<br>21????????? ? 1<br>22?????????? ? 4<br>23??????? ? 3<br>24????????? ? 1<br>25??????????? ? 3<br>26???????????? ? 1<br>27????????? ? 1<br>28?????????? ? 3<br>29????????? ? 5<br>30????????? ? 1??????12?1/2??????????????????","05/01?07/28 ??????????1??","05/01?07/28 ??????????11??","07/04?07/28 XP * 10000??(??)??????????????????","07/03?01/01 ???:35030<br>01?????????16????????????????","07/03?01/01 ???:35031<br>01?????????17????????????????","07/03?01/01 ???:35032<br>01?????????18????????????????","07/11?07/28 ???:35034<br>1???XP ? 5,000<br>2?????????? ? 1<br>3?????????? ? 1<br>4???XP ? 10,000<br>5??????????? ? 1????????????<br>6??????? ? 1<br>7????????? ? 1<br>8???XP ? 15,000<br>9???????????? ? 1<br>10????????? ? 1<br>11???XP ? 20,000<br>12?????????? ? 1<br>13??????? ? 1<br>14?????????? ? 1<br>15??????????? ? 1<br>16?????????? ? 1<br>17???XP ? 25,000???????????????????????????","07/11?07/28 ???:982<br>1????????? ? 1??????????????????????????????","07/16?08/08 ????","07/18?07/28 ?????","07/18?07/28 ?????????","07/28?01/01 ??????????1??","07/28?01/01 ??????????11??","07/28?08/18 ???:35033<br><br>1??????? ? 1<br>2??????? ? 1<br>3??????? ? 1<br>4??????? ? 1<br>5??????????? ? 1<br>6??????? ? 1<br>7??????? ? 1<br>8??????? ? 1<br>9??????? ? 1<br>10??????????? ? 1<br>11??????? ? 1<br>12??????? ? 1<br>13??????? ? 1<br>14??????? ? 1<br>15????????? ? 1<br>16??????? ? 1<br>17??????? ? 1<br>18??????? ? 1<br>19??????? ? 1<br>20??????????? ? 1<br>21??????? ? 1?????????? ????????????????","07/28?08/25 ????","07/28?08/18 ?????","07/28?09/01 ??????????","07/28?08/17 ???????","08/01?08/02 ????????","08/01?08/02 ??????&????????","08/01?08/18 ?????","08/01?08/18 ?????????"],"mission":["05/26(00:00)?11/03(00:00) ??????????????3???????<br>???????????????????????????<br>???XP?100,000","05/26(00:00)?11/03(00:00) XP?????????5???????<br>???????????????????????????<br>????????????1","05/26(00:00)?11/03(00:00) ???????????5???????<br>????????????????5???????<br>????????C?1","05/26(00:00)?11/03(00:00) ?????????????7?????????<br>?????????7????????<br>????????????1","05/26(00:00)?11/03(00:00) ?????????????????????<br>??????????????4???????????<br>????????20","05/26(00:00)?11/03(00:00) ??????????????3???????<br>????????????????????????????<br>???XP?100,000","05/26(00:00)?11/03(00:00) XP?????????5???????<br>????????????????????????????<br>????????????1","05/26(00:00)?11/03(00:00) ?????????????10?????????<br>?????????10????????<br>???XP?100,000","05/26(00:00)?11/03(00:00) ???????????10???????<br>????????????????10???????<br>????????????1","05/26(00:00)?11/03(00:00) ?????????????????????<br>??????????????4????????????<br>????????30","06/02(00:00)?11/10(00:00) ??????????????3???????<br>???????????????????????????<br>???XP?100,000","06/02(00:00)?11/10(00:00) XP?????????5???????<br>???????????????????????????<br>????????????1","06/02(00:00)?11/10(00:00) ???????????5???????<br>????????????????5???????<br>????????C?1","06/02(00:00)?11/10(00:00) ?????????????7?????????<br>?????????7????????<br>????????????1","06/02(00:00)?11/10(00:00) ?????????????????????<br>??????????????4???????????<br>????????20","06/02(00:00)?11/10(00:00) ??????????????3???????<br>????????????????????????????<br>???XP?100,000","06/02(00:00)?11/10(00:00) XP?????????5???????<br>????????????????????????????<br>????????????1","06/02(00:00)?11/10(00:00) ?????????????10?????????<br>?????????10????????<br>???XP?100,000","06/02(00:00)?11/10(00:00) ?????????????3???????<br>????????????????????????????<br>????????????1","06/02(00:00)?11/10(00:00) ?????????????????????<br>??????????????4????????????<br>????????30","07/04?07/28 ?????????????????????????4???????<br>????????????????????<br>???XP?20,000","07/04?07/28 ?????????????????????????8???????<br>????????????????????<br>???XP?30,000","07/04?07/28 ?????????????????????????12???????<br>????????????????????<br>???XP?50,000","07/04?07/28 ????????????????????????????????<br>???????????????????????<br>??????????1","07/04?07/28 ????????????????????????????????<br>????????????????????????<br>???????????1","07/03(00:00)?01/01(00:00) ????????????????1???????<br>?????????????<br>???XP?500,000","07/03(00:00)?01/01(00:00) ????????????????2???????<br>?????????????<br>???????????10","07/03(00:00)?01/01(00:00) ????????????????2???????<br>?????????????<br>???XP?1,000,000","07/03(00:00)?01/01(00:00) ????????????????3???????<br>?????????????<br>?????????????10","07/03(00:00)?01/01(00:00) ????????????????3???????<br>?????????????<br>???XP?2,000,000","07/03(00:00)?01/01(00:00) ????????????????4???????<br>?????????????<br>??????????1","07/03(00:00)?01/01(00:00) ????????????????5???????<br>?????????????<br>???XP?3,000,000","07/03(00:00)?01/01(00:00) ?????????FINAL??????20???????<br>?????????????<br>??????????3","07/11?07/28 ???!???????????5???????<br>???!????????????????????????<br>????????????1","07/11?07/28 ???!???????????10???????<br>???!????????????????????????<br>????????????1","07/11?07/28 ???!???????????20???????<br>???!????????????????????????<br>????????????1","07/11?07/28 ???????????????????????????????????<br>???1????????????????????????????...<br>????????????1","07/11?07/28 ?4??????<br>??????????????????????????<br>????????10","07/11?07/28 ?6??????<br>???????????????2??????<br>????????10","07/11?07/28 ?9??????<br>??????????????????????? ??????<br>????????10","07/11?07/28 ?????????<br>4?????????????????????????<br>????????30","07/16?07/28 ?10??????<br>??????????????????? ??????<br>????????10","07/28?08/18 ???????1????????????<br>????????? ???????????5????<br>????????2","07/28?08/18 ???????1????????????<br>????????? ???????????10????<br>????????3","07/28?08/18 ???????1????????????<br>????????? ???????????15????<br>??????????1","07/28?08/18 ???????1????????????<br>????????? ???????????30????<br>??????????1","07/28?08/18 ???????1?????????????<br>??????????????????10????<br>???XP?100,000","07/28?08/18 ???????1?????????????<br>??????????????????20????<br>????????????1","07/28?08/18 ???????1?????????????<br>??????????????????30????<br>??????????1","07/28?08/18 ???????1?????????????<br>???????????????3????????<br>????????????1","07/28?08/18 ???????1?????????????<br>??????????????3????????<br>????????????1","07/28?08/18 ???????1?????????????<br>?????????????????????3????????<br>????????????1","07/28?08/18 ???????1?????????????<br>???????:N206???????????3????????<br>????????????1","07/28?08/18 ???????1????????????????<br>????????????1????<br>???????3","07/28?08/18 ???????1????????????????<br>????????????2????<br>???????3","07/28?08/18 ???????1????????????????<br>????????????3????<br>???????4","07/28?08/18 ???????1????????????????<br>????????????4????<br>???????4","08/01?08/16 ?????????????????????<br>????????????????1????3???????<br>??????????1","08/01?08/16 ?????????????????????<br>????????????????1????5???????<br>????????????2","08/01?08/16 ?????????????????????<br>????????????????2????3???????<br>??????????2","08/01?08/16 ?????????????????????<br>????????????????2????5???????<br>?????????????1"]};
    const now = new Date();

    function parseStartDate(text) {
      const match = text.match(/^(d{2})/(d{2})/);
      if (!match) return null;
      const year = new Date().getFullYear();
      return new Date(year, parseInt(match[1]) - 1, parseInt(match[2]));
    }

    function renderContent(id, showPast) {
      const container = document.getElementById(id);
      container.innerHTML = '';
      const sections = id === 'all' ? Object.keys(data).filter(k => k !== 'gatya5') : [id];
      for (const key of sections) {
        const title = document.createElement('div');
        title.className = 'section-title';
        title.textContent = key;
        container.appendChild(title);

        let count = 0;
        for (let i = 0; i < data[key].length; i++) {
          const text = data[key][i];
          if (key === 'gatya4' && (/???????/.test(text) || /????????/.test(text))) continue;
          const startDate = parseStartDate(text);
          if (!showPast && startDate && startDate < now) continue;
          if (!showPast && !startDate) continue;
          const div = document.createElement('div');
          div.className = 'event-card';
          if (/?|??|?????????|???????|???????/.test(text)) div.classList.add('red');
          else if (/??????|????????|???????/.test(text)) div.classList.add('blue');
          div.innerHTML = text;
          if (key === 'gatya4') div.addEventListener('click', () => openModal(data.gatya5[i] || '??????????'));
          container.appendChild(div);
          count++;
        }
        if (count === 0) container.appendChild(Object.assign(document.createElement('div'), {textContent: '???????????????'}));
      }
    }

    function showTab(id) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.content').forEach(c => c.classList.add('hidden'));
      document.querySelector(`.tab[onclick="showTab('${id}')"]`).classList.add('active');
      document.getElementById(id).classList.remove('hidden');
      renderContent(id, document.getElementById('showAll').checked);
    }

    document.getElementById('showAll').addEventListener('change', () => {
      const activeTab = document.querySelector('.tab.active').textContent.trim();
      const id = activeTab === '??????' ? 'all' : activeTab;
      renderContent(id, document.getElementById('showAll').checked);
    });

    function openModal(content) {
      document.getElementById('modal-body').innerHTML = content;
      document.getElementById('detail-modal').classList.add('show');
    }
    document.getElementById('modal-close').addEventListener('click', () => document.getElementById('detail-modal').classList.remove('show'));
    document.getElementById('detail-modal').addEventListener('click', e => { if (e.target.id === 'detail-modal') closeModal(); });
    function closeModal() { document.getElementById('detail-modal').classList.remove('show'); }
    renderContent('gatya4', false);
  </script>
</body>
</html>